# Αναφορά Προόδου Project scRNA-seq App

## Ημερομηνία: 2024-07-12 # Ενημερωμένη Ημερομηνία

### Φάση 1: Προετοιμασία και Βασική Δομή

*   **Ρύθμιση Περιβάλλοντος Ανάπτυξης:**
    *   Επιλέχθηκε η χρήση του Windows Subsystem for Linux (WSL) για την ανάπτυξη για καλύτερης διαχείρισης πακέτων και συμβατότητας.
    *   Εγκαταστάθηκε το απαραίτητο πακέτο `python3.12-venv` στο WSL.
    *   Δημιουργήθηκε επιτυχώς το εικονικό περιβάλλον Python (`.venv`) μέσα στον φάκελο του project στο WSL (`/mnt/c/ergasies/TL_Project`).

*   **Δημιουργία Βασικών Αρχείων Project:**
    *   Δημιουργήθηκε το αρχείο `requirements.txt` με τις αρχικές εξαρτήσεις.
    *   Δημιουργήθηκε το αρχείο `app.py` με τη βασική δομή της εφαρμογής Streamlit (φόρτωση αρχείων και προεπισκόπηση).
    *   Δημιουργήθηκε το αρχείο `project_plan.md`.
    *   Δημιουργήθηκε το αρχείο `progress_report.md` (αυτό το αρχείο).

*   **Εγκατάσταση Εξαρτήσεων:**
    *   Ενεργοποιήθηκε το εικονικό περιβάλλον (`source .venv/bin/activate`).
    *   Εγκαταστάθηκαν επιτυχώς οι εξαρτήσεις του project από το αρχείο `requirements.txt` (`pip install -r requirements.txt`) μέσα στο περιβάλλον WSL.

*   **Προετοιμασία Ακατέργαστων Δεδομένων:**
    *   Κατεβάστηκαν τα ακατέργαστα δεδομένα (GSE148822_RAW.tar).
    *   Οργανώθηκαν οι φάκελοι των δειγμάτων (GSM4483339, GSM4483340, GSM4483366, GSM4483367) μέσα στον κατάλογο `TL_2025_scRNA-seq_pipeline_python-main/data/RAW/` (αργότερα μεταφέρθηκαν στο `data/RAW/` του project).
    *   Τα αρχεία `barcodes.tsv`, `features.tsv`, `matrix.mtx` συμπιέστηκαν σε μορφή `.gz` και μετονομάστηκαν στα αναμενόμενα ονόματα μέσα στους αντίστοιχους φακέλους δειγμάτων.

*   **Δημιουργία Αρχείων .h5ad (από ακατέργαστα δεδομένα):**
    *   Δημιουργήθηκε το Python script `generate_h5ad_files.py` για την αυτοματοποίηση της μετατροπής των 10x MTX δεδομένων σε μορφή AnnData με `gzip` συμπίεση.
    *   Εκτελέστηκε επιτυχώς το `generate_h5ad_files.py`, δημιουργώντας τα αρχεία `.h5ad` (με `gzip` συμπίεση) στον φάκελο `data/h5ad/`.

*   **Προεπεξεργασία Αρχείων .h5ad:**
    *   Τροποποιήθηκε το Jupyter Notebook `3.Data_preprocessor.ipynb` ώστε να αποθηκεύει τα αρχεία με `gzip` συμπίεση.
    *   Δημιουργήθηκε ο φάκελος `data/h5ad_filt/` (αν δεν υπήρχε).
    *   Εκτελέστηκε επιτυχώς το Jupyter Notebook `3.Data_preprocessor.ipynb`.
    *   Τα αρχεία `.h5ad` από τον φάκελο `data/h5ad/` προεπεξεργάστηκαν και αποθηκεύτηκαν στον φάκελο `data/h5ad_filt/` με το πρόθεμα `filtered_`.

*   **Αρχικός Έλεγχος και Βελτιώσεις Εφαρμογής Streamlit:**
    *   Η λειτουργία φόρτωσης αρχείων `.h5ad` δοκιμάστηκε και βελτιώθηκε για σταθερότητα.
    *   Η διαχείριση της κατάστασης (`st.session_state`) βελτιώθηκε για διατήρηση δεδομένων μεταξύ αλληλεπιδράσεων.

### Φάση 2: Υλοποίηση Βασικών Βημάτων Pipeline

*   **Ενσωμάτωση Ενοποίησης Δεδομένων (Scanorama):**
    *   Δημιουργήθηκε το αρχείο `pipeline_scripts/integration.py`.
    *   Προστέθηκε ενότητα στο sidebar για Scanorama (ενεργή με >1 αρχεία) και εκτέλεση μέσω κουμπιού.

*   **Ενσωμάτωση Προεπεξεργασίας (Quality Control):**
    *   Δημιουργήθηκε το αρχείο `pipeline_scripts/preprocessing.py`.
    *   Προστέθηκε ενότητα στο sidebar για παραμέτρους QC και εκτέλεση.
    *   Εμφανίζονται violin plots των QC metrics πριν και μετά το φιλτράρισμα.

*   **Ενσωμάτωση PCA, UMAP, και Leiden Clustering:**
    *   Δημιουργήθηκε το αρχείο `pipeline_scripts/dimensionality_reduction.py`.
    *   Προστέθηκε ενότητα στο sidebar για παραμέτρους και εκτέλεση.
    *   Εμφανίζεται UMAP plot χρωματισμένο με βάση τα Leiden clusters και άλλες επιλεγόμενες μεταβλητές.

### Φάση 3: Προχωρημένες Αναλύσεις και Οπτικοποιήσεις

*   **Ενσωμάτωση Ανάλυσης Διαφορικά Εκφρασμένων Γονιδίων (DEG):**
    *   Δημιουργήθηκε το αρχείο `pipeline_scripts/deg_analysis.py`.
    *   Προστέθηκε ενότητα στο sidebar για παραμέτρους DEG.
    *   Εμφανίζεται πίνακας με top DEGs και Volcano Plot.

*   **Ενσωμάτωση Χαρακτηρισμού Κυτταρικών Τύπων (Decoupler):**
    *   Δημιουργήθηκε το αρχείο `pipeline_scripts/annotation.py`.
    *   Προστέθηκε ενότητα στο sidebar για φόρτωση αρχείου δεικτών, επιλογή στηλών, και εκτέλεση ORA/WMS.
    *   Εμφανίζονται ORA Scores Heatmap και WMS Scores Violin Plots. Οι WMS scores προστίθενται στις επιλογές χρωματισμού του UMAP.

*   **Ολοκλήρωση Φάσης 3: Διαδραστική Οπτικοποίηση Γονιδιακής Έκφρασης στο UMAP:**
    *   Προστέθηκε text input στην κύρια οθόνη για την εισαγωγή ονομάτων γονιδίων από τον χρήστη.
    *   Ο UMAP plot ενημερώνεται δυναμικά για να εμφανίσει την έκφραση των επιλεγμένων γονιδίων.
    *   Υπάρχει fallback σε selectbox για χρωματισμό βάσει `.obs` στηλών αν δεν δοθούν γονίδια.

### Φάση 4: Ολοκλήρωση, Dockerization και Τεκμηρίωση (Σε Εξέλιξη)

*   **Δημιουργία Tab "Πληροφορίες Ομάδας":**
    *   Προστέθηκε μια νέα καρτέλα (tab) στην εφαρμογή Streamlit με τίτλο "Πληροφορίες Ομάδας".
    *   Ενημερώθηκε με τα ονόματα των μελών της ομάδας και άλλες πληροφορίες του project.

*   **Βελτιώσεις UI/UX:**
    *   Όλες οι ενότητες παραμέτρων στην πλευρική μπάρα (Sidebar) τοποθετήθηκαν μέσα σε `st.sidebar.expander` widgets.
    *   Αυτό βελτίωσε την οργάνωση και τη χρηστικότητα της πλευρικής μπάρας, καθιστώντας την πιο συμπαγή.
    *   Διορθώθηκε σφάλμα `ImportError` σχετικά με τη συνάρτηση `plot_volcano`.
    *   Διευκρινίστηκε η χρήση των φιλτραρισμένων αρχείων `.h5ad` για αποφυγή σφαλμάτων μεγέθους αρχείου κατά το ανέβασμα.

*   **Έναρξη Dockerization:**
    *   Δημιουργήθηκε το αρχείο `Dockerfile` με τις απαραίτητες οδηγίες για το χτίσιμο της Docker image της εφαρμογής (βάση Python 3.12-slim, αντιγραφή αρχείων, εγκατάσταση εξαρτήσεων, έκθεση πόρτας, εντολή εκκίνησης, healthcheck).
    *   Δημιουργήθηκε το αρχείο `.dockerignore` για τον αποκλεισμό περιττών αρχείων από την Docker image.
    *   Παρασχέθηκαν οδηγίες για το build της Docker image (`docker build -t streamlit-scrna-app .`).

*   **Έναρξη Συγγραφής LaTeX Report:**
    *   Δημιουργήθηκε το αρχείο `report.tex` με μια ολοκληρωμένη δομή και placeholders για τις ενότητες: Τίτλος, Περίληψη, Εισαγωγή, Σχεδιασμός Υλοποίησης, UML Διαγράμματα, Ανάλυση Υλοποίησης, Οπτικοποιήσεις Αποτελεσμάτων, Περιγραφή Dockerization, Συμπεράσματα και Βιβλιογραφία.

**Επόμενα Βήματα:**
1.  Συμπλήρωση του περιεχομένου του LaTeX report (`report.tex`).
2.  Δημιουργία των UML διαγραμμάτων (Class Diagram & Use Case Diagram) και εισαγωγή τους στο report.
3.  Λήψη screenshots των οπτικοποιήσεων από την εφαρμογή και εισαγωγή τους στο report.
4.  Δοκιμαστικό build και εκτέλεση της Docker image για εντοπισμό και επίλυση τυχόν προβλημάτων.
5.  Ολοκλήρωση του `README.md` του project με αναλυτικές οδηγίες εγκατάστασης, χρήσης και Dockerization.
6.  Πιθανές περαιτέρω βελτιώσεις UI/UX (π.χ., πιο σαφή μηνύματα κατάστασης, καλύτερη διάταξη αποτελεσμάτων).
7.  Προετοιμασία για την τελική υποβολή του project (GitHub repository, LaTeX report). 